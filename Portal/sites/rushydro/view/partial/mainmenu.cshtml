@model List<PageModel>
@using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
{
    @Html.AntiForgeryToken()
}

<div class="collapse navbar-collapse" id="navbar-main">
    <ul class="nav navbar-nav">
        @if (Model != null)
        {
            foreach (var item in Model)
            {
                string _class1 = (item.Url == ViewBag.ThisUrl) ? "active" : "";
                
                if (item.Childrens != null)
                {
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@item.Name</a>
                        <ul class="dropdown-menu">
                            @foreach (var child in item.Childrens)
                            {
                                <li><a href="@child.Url">@child.Name</a></li>                                
                            }
                        </ul>
                    </li>

                    
                }
                else
                {
                    <li class="@_class1">
                        <a href="@item.Url">@item.Name</a>
                    </li>
                }
            }
        }
    </ul>
    <ul class="nav navbar-nav navbar-right">
        
        <li><a href="/settings"><i class="fa fa-cog"></i></a></li>        
        <li><a href="javascript:document.getElementById('logoutForm').submit()"><i class="fa fa-sign-out"></i></a></li>
    </ul>
</div>