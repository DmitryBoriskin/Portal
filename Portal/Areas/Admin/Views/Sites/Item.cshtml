@model SitesViewModel
@{
    int i = 0;
}

@using (Html.BeginForm(Model.ActionName, Model.ControllerName, FormMethod.Post))
{
    @*if (Model.UserResolution.Write)*@
    if (true)
    {
    <div class="content">
        <h1>Все сайты портала</h1>
        @Html.TextBoxFor(m=>Model.Item.Title, new { @required = "", @Title = "Название", @placeholder = "Название", MaxLength = "512" })

        @if (Model.Item != null)
        {
            <div class="group-block open" title="Доменные имена">
                <div class="row">
                    <div class="alert alert-info" role="alert">Чтобы сайт отображался на другом домене, в его настройках DNS необходимо прописать запись типа А указав ip: @Request.ServerVariables["LOCAL_ADDR"] и добавить домен:</div>





                    @if (Model.Item.DomainList != null && Model.Item.DomainList.Count() > 0)
                    {
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Основной домен</th>
                                    <th width="90%">Доменное имя</th>
                                    <th>&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.Item.DomainList)
                                {
                                    <tr>
                                        <td>
                                            <div class="host-chkbx-div" data-domain-id="@item.id">
                                                <input name="domainName" type="checkbox" class="checkbox" title="" data-toggle="toggle" data-off="Нет" data-on="Да" data-onstyle="success" data-offstyle="danger" data-width="50" @(item.IsDefault ? "checked" : "") />
                                            </div>
                                        </td>

                                        <td>@item.DomainName</td>
                                        <td class="text-right">
                                            <span id="domain_@(item.DomainName)" data-container="body" data-toggle="popover" data-placement="left" data-content=""></span>
                                            <a class="del_domain" data-id="@item.id" data-domain-name="@item.DomainName" data-url="/admin/orgs/DelPhoneDepart" data-init="false"></a>
                                        </td>
                                    </tr>
                                    i++;
                                }
                            </tbody>
                        </table>
                    }

                    @Html.HiddenFor(m => m.Item.Id)
                    <div class="col-md-4">
                        <input type="text" title="Домен" name="new_domain" placeholder="example.ru" />
                    </div>
                    <div class="col-md-4">
                        <button style="margin-top: 23px;" class="button icon-create green pull-right" type="submit" name="action" value="add-new-domain">Добавить</button>
                    </div>




                </div>
            </div>
        }
    </div>       
    <div class="dop_info-block">
        @Html.CheckBoxFor(m => m.Item.Disabled, new { @class = "checkbox", @title = "Состояние сайта", @data_toggle = "toggle", @data_off = "Включен", @data_on = "Отключен", @data_onstyle = "danger", @data_offstyle = "success", @data_width = "270" })
        @if (Model.Item != null)
        {
            @Html.ActionLink("Журнал изменений", "Log", "services", new { @id = Model.Item.Id, @type = "page" }, new { @id = "LogLists", @class = "button pop-up_frame icon-archive", @data_class = "LogList", @title = "Журнал изменений" })
        }
    </div>
    }
    else
    {
        <p>@Settings.NoResolut</p>        
    }
    <div class="buttons">
        @*@if ((Model.Item != null && Model.UserResolution.Change) || (Model.Item == null && Model.UserResolution.Write))*@
        @if (true)
        {
            <button type="submit" name="action" value="save-btn" data-primary="true" class="button icon-create">Сохранить</button>
        }
        @*@if (Model.Item != null && Model.UserResolution.Delete)*@
        @if (true)
        {
            <button type="submit" name="action" data-action="delete" value="delete-btn" class="button icon-delete">Удалить</button>
        }
        <button type="submit" name="action" value="cancel-btn" class="button icon-cancel">Закрыть</button>
    </div>
}